<script>
    var Webflow = Webflow || [];
    Webflow.push(function () {
        if (!document.querySelector('[header="1"]')) return;

        onLibrariesLoaded(["gsap", "pixi"], function () {
            $('[header="1"]').each(function () {
                const videoDesktop = $('#hero-anim-desktop');
                const videoMobile = $('#hero-anim-mob');
                // Get all the elements insinde .heading-title
                let titles = $(this).find('.heading-title').children();
                let titlesTl = gsap.timeline({ paused: true });

                // Use GSAP's matchMedia to play the appropriate video based on viewport width
                let mm = gsap.matchMedia();

                mm.add("(min-width: 992px)", () => {
                    if (videoDesktop.length) {
                        videoDesktop[0].play();
                        if (videoMobile.length) videoMobile[0].pause();
                    }
                });

                mm.add("(max-width: 991px)", () => {
                    if (videoMobile.length) {
                        videoMobile[0].play();
                        if (videoDesktop.length) videoDesktop[0].pause();
                    }
                });

                setTimeout(() => {
                    titlesTl.play();
                }, 4000);

                titlesTl.from(titles, {
                    duration: 0.5,
                    y: 50,
                    opacity: 0,
                    stagger: 0.3,
                    ease: "power2.out"
                });
            });
        });
    });
</script>